/* Respilibrio v2 â€“ minimal main UI, modal settings, robust background image */
:root{
  --bg:#0f1221; --fg:#f5f7ff; --muted:#a9b2d0; --accent:#6de0b6; --accent2:#78a6ff;
  --card:#171b33;
  --dim:0.25; --blur:0px;
}
*{box-sizing:border-box;font-family:system-ui,Segoe UI,Roboto,Inter,Arial}
html,body{height:100%}
body{margin:0;background:radial-gradient(1100px 800px at 50% 10%,#14193a 0%,#0c0f1f 60%,#070913 100%);color:var(--fg);display:flex;flex-direction:column}
.appbar{display:flex;align-items:center;justify-content:space-between;padding:10px 14px}
h1{margin:0;font-size:22px;font-weight:800}
.iconbtn{background:transparent;border:1px solid #2b3468;color:#cfe6ff;border-radius:10px;padding:8px 10px;cursor:pointer}
.stage{position:relative;flex:1;margin:0 12px;border:1px solid #2b3468;border-radius:16px;overflow:hidden;background:#0f1430;display:flex;align-items:center;justify-content:center}
.bgImg{position:absolute;inset:0;background-size:cover;background-position:center;filter:blur(var(--blur));z-index:0}
.overlay{position:absolute;inset:0;background:radial-gradient(60% 40% at 50% 25%, #12183d88, #0b0f2488 55%, #070913dd 100%);box-shadow: inset 0 -120px 160px #070913aa;background-color: rgba(0,0,0,var(--dim));z-index:1}
.center{position:absolute;top:6%;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center;gap:10px;z-index:3}
.legend{color:var(--muted);text-align:center}
.mini{font-size:12px;color:#c3c9e8}
.bubble{width:clamp(140px, 46vw, 260px); height:clamp(140px, 46vw, 260px);border-radius:50%;background:radial-gradient(70% 70% at 40% 35%,#78ffd2,#46b38a 60%,#2d6b59 100%);box-shadow:0 12px 40px #2cf1a633, inset 0 0 30px #ffffff22, 0 0 calc(var(--glow,0) * 28px) #6de0b666;transition:none;user-select:none;touch-action:none;will-change:transform,filter}
.bubble.hold{filter:brightness(1.06) saturate(1.12)}
.hudBottom{position:absolute;left:6%;right:6%;bottom:10%;z-index:4;display:flex;flex-direction:column;gap:10px}
.runnerLane{position:relative;width:100%;padding:10px 12px;border:1px solid #2b3468;background:linear-gradient(180deg,#1a1f3f,#111633);border-radius:12px;box-shadow:inset 0 6px 12px #0007}
.runner{position:absolute;left:0%;top:50%;transform:translate(-50%,-50%);width:30px;height:30px;border-radius:50%;background:radial-gradient(70% 70% at 40% 35%,#a7ffe3,#6de0b6 60%,#2e7a66 100%);box-shadow:0 6px 18px #2cf1a633;display:grid;place-items:center}
.runner-shadow{position:absolute;width:34px;height:8px;border-radius:999px;background:#0007;filter:blur(2px);left:0%;top:calc(50% + 12px);transform:translate(-50%,-50%);z-index:0}
.finishFlag{position:absolute;right:0;top:0;bottom:0;width:4px;background:linear-gradient(180deg,#ffd36b,#ffb94d);box-shadow:0 0 10px #ffcf6b66}
.finishLabel{position:absolute;right:-6px;top:-16px;transform:translateX(50%);font-size:10px;color:#ffde9a}
.ribbon{position:absolute;right:-8px;top:50%;transform:translateY(-50%);width:90px;height:22px;display:none;z-index:5}
.ribL,.ribR{position:absolute;top:0;width:50%;height:100%;background:linear-gradient(180deg,#ffe7a6,#ffc86c);color:#2b2540;font-weight:700;font-size:10px;letter-spacing:1px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 10px #0006;border:1px solid #e6b14a}
.ribL{left:0;border-radius:6px 0 0 6px}.ribR{right:0;border-radius:0 6px 6px 0}
.ribText{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none}
.ribbon.split .ribL{animation:ribL 600ms ease forwards}.ribbon.split .ribR{animation:ribR 600ms ease forwards}
@keyframes ribL{40%{transform:translate(-6px,-2px) rotate(-4deg)}100%{transform:translate(-32px,-14px) rotate(-16deg);opacity:.0}}
@keyframes ribR{40%{transform:translate(6px,2px) rotate(4deg)}100%{transform:translate(32px,14px) rotate(16deg);opacity:.0}}
.meter{height:6px;border-radius:999px;border:1px solid #2b3468;background:#121735;overflow:hidden}
.meter>div{height:100%;width:0%;background:linear-gradient(90deg,#6de0b6,#78a6ff)}
.actions{display:flex;gap:10px;margin:10px 12px 16px}
.btn{background:linear-gradient(180deg,#2d3567,#212750);border:1px solid #3a447e;color:#f5f7ff;padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:600}
.btn.primary{background:linear-gradient(180deg,#3c8b6f,#2f6d58);border-color:#4fb891}
.btn:disabled{opacity:.5;cursor:not-allowed}

/* Modal */
.modal{position:fixed;inset:0;background:#0009;display:none;align-items:center;justify-content:center;padding:16px;z-index:20}
.modal.show{display:flex}
.modal-content{width:min(920px,96vw);max-height:90vh;overflow:auto;background:linear-gradient(180deg,#171b33,#12162b);border:1px solid #2b3468;border-radius:16px;padding:14px}
.modal-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.grid{display:grid;gap:10px}
.grid .col{display:flex;flex-direction:column;gap:6px}
label{font-size:12px;color:#c3c9e8}
input[type="number"],input[type="range"],input[type="file"]{width:100%;padding:10px;border-radius:10px;background:#0f1430;color:#f5f7ff;border:1px solid #2b3468;outline:none}
.row-slim{display:grid;gap:10px;margin-top:8px}
@media(min-width:640px){.grid{grid-template-columns:repeat(4,1fr)}.row-slim{grid-template-columns:2fr 1fr 1fr 1fr}}
.thumb{width:100%;height:40px;border-radius:8px;border:1px solid #2b3468;background:#0f1430;background-size:cover;background-position:center}
