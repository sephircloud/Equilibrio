<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Respilibrio</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/favicon.ico" type="image/x-icon" />
  <meta name="theme-color" content="#6de0b6" />
  <script defer src="script.js"></script>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Respilibrio</h1>
      <p>Maintiens pendant <strong>Inspire</strong>, relâche pendant <strong>Expire</strong>. 
         Le coureur atteint l’arrivée quand le <strong>timer global</strong> termine.</p>

      <div class="grid">
        <div class="col"><label>Durée inspir. (s)</label><input id="inSecs" type="number" min="2" max="12" value="5"></div>
        <div class="col"><label>Durée expir. (s)</label><input id="outSecs" type="number" min="2" max="12" value="5"></div>
        <div class="col"><label>Durée séance (min)</label><input id="mins" type="number" min="1" max="30" value="5"></div>
        <div class="col"><label>Base croissance (GR)</label><input id="baseGr" type="number" min="5" max="5000" value="10"></div>
      </div>

      <div class="row-slim">
        <div class="col">
          <label>Fond d’écran perso (image)</label>
          <input id="bgFile" type="file" accept="image/*">
          <div id="bgThumb" class="thumb"></div>
        </div>
        <div class="col"><label>Assombrir</label><input id="bgDim" type="range" min="0" max="0.8" step="0.02" value="0.2"></div>
        <div class="col"><label>Flou (px)</label><input id="bgBlur" type="range" min="0" max="10" step="1" value="0"></div>
        <div class="col" style="display:flex;flex-direction:column;gap:6px">
          <button class="btn" id="applyBg">Appliquer</button>
          <button class="btn" id="resetBg">Réinitialiser</button>
        </div>
      </div>

      <div class="stage" id="stageArea">
        <div class="center">
          <div class="bubble" id="bubble" role="button" tabindex="0" aria-label="Zone de respiration"></div>
          <div class="legend">
            <div id="phaseText">Prêt ?</div>
            <div class="mini" id="timerText">00:00</div>
            <div class="mini" id="phaseCountdown">Phase: — • Reste: —</div>
            <div class="mini" id="hintText">Maintiens pendant l’inspiration, relâche pendant l’expiration.</div>
          </div>
        </div>

        <div class="hudBottom">
          <div class="runnerLane">
            <div class="runner-shadow" id="runnerShadow"></div>
            <div class="runner" id="runner"><div class="face">🏃‍♂️</div></div>
            <div class="finishFlag"></div>
            <div class="finishLabel">ARRIVÉE</div>
            <div class="ribbon" id="ribbon">
              <div class="ribL"></div>
              <div class="ribR"></div>
              <div class="ribText">ARRIVÉE</div>
            </div>
          </div>
          <div class="meter"><div id="meterFill"></div></div>
        </div>
      </div>

      <div class="actions">
        <button class="btn primary" id="startBtn">Démarrer</button>
        <button class="btn" id="stopBtn" disabled>Arrêter</button>
        <span class="mini" id="resultText"></span>
      </div>
    </div>
  </div>
</body>
</html>
