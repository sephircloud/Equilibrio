<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Respilibrio</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/favicon.ico" type="image/x-icon" />
  <meta name="theme-color" content="#6de0b6" />
</head>
<body>
  <header class="appbar">
    <h1>Respilibrio</h1>
    <button id="openSettings" class="iconbtn" aria-label="R√©glages">‚öôÔ∏è</button>
  </header>

  <main class="stage" id="stageArea">
    <!-- Background image element -->
    <div class="bgImg" id="bgImg" aria-hidden="true"></div>
    <div class="overlay"></div>

    <div class="center">
      <div class="bubble" id="bubble" role="button" tabindex="0" aria-label="Zone de respiration"></div>
      <div class="legend">
        <div id="phaseText">Pr√™t ?</div>
        <div class="mini" id="timerText">00:00</div>
        <div class="mini" id="phaseCountdown">Phase: ‚Äî ‚Ä¢ Reste: ‚Äî</div>
        <div class="mini" id="hintText">Maintiens = Inspire ‚Ä¢ Rel√¢che = Expire</div>
      </div>
    </div>

    <div class="hudBottom">
      <div class="runnerLane">
        <div class="runner-shadow" id="runnerShadow"></div>
        <div class="runner" id="runner"><div class="face">üèÉ‚Äç‚ôÇÔ∏è</div></div>
        <div class="finishFlag"></div>
        <div class="finishLabel">ARRIV√âE</div>
        <div class="ribbon" id="ribbon">
          <div class="ribL"></div>
          <div class="ribR"></div>
          <div class="ribText">ARRIV√âE</div>
        </div>
      </div>
      <div class="meter"><div id="meterFill"></div></div>
    </div>
  </main>

  <footer class="actions">
    <button class="btn primary" id="startBtn">D√©marrer</button>
    <button class="btn" id="stopBtn" disabled>Arr√™ter</button>
    <span class="mini" id="resultText"></span>
  </footer>

  <!-- Settings modal -->
  <div id="settingsModal" class="modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <div class="modal-head">
        <h2 id="settingsTitle">R√©glages</h2>
        <button id="closeSettings" class="iconbtn" aria-label="Fermer">‚úñ</button>
      </div>

      <div class="grid">
        <div class="col">
          <label>Dur√©e inspir. (s)</label>
          <input id="inSecs" type="number" min="2" max="12" value="5">
        </div>
        <div class="col">
          <label>Dur√©e expir. (s)</label>
          <input id="outSecs" type="number" min="2" max="12" value="5">
        </div>
        <div class="col">
          <label>Dur√©e s√©ance (min)</label>
          <input id="mins" type="number" min="1" max="30" value="5">
        </div>
        <div class="col">
          <label>Base croissance (GR)</label>
          <input id="baseGr" type="number" min="5" max="5000" value="10">
        </div>
      </div>

      <div class="row-slim">
        <div class="col">
          <label>Fond d‚Äô√©cran perso (image)</label>
          <input id="bgFile" type="file" accept="image/*">
          <div id="bgThumb" class="thumb" style="margin-top:6px"></div>
          <div class="helper">Astuce : une image verticale rend mieux sur mobile.</div>
        </div>
        <div class="col">
          <label>Assombrir</label>
          <input id="bgDim" type="range" min="0" max="0.8" step="0.02" value="0.2">
        </div>
        <div class="col">
          <label>Flou (px)</label>
          <input id="bgBlur" type="range" min="0" max="10" step="1" value="0">
        </div>
        <div class="col" style="align-items:flex-end;gap:6px;display:flex;flex-direction:column">
          <button class="btn" id="applyBg">Appliquer</button>
          <button class="btn" id="resetBg">R√©initialiser</button>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
